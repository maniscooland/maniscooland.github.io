<!DOCTYPE html>
<html>
<head>
    <title>Multiplayer Shooter</title>
    <style>
        canvas {
            border: 1px solid black;
            background: #eee;
        }
        body { margin: 0; overflow: hidden; }
    </style>
</head>
<body>
<canvas id="gameCanvas"></canvas>

<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');

// Set canvas to full window size
function resizeCanvas() {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
}
resizeCanvas();
window.addEventListener('resize', resizeCanvas);

// Player class
class Player {
    constructor(x, y, color) {
        this.x = x;
        this.y = y;
        this.radius = 20;
        this.color = color;
        this.speed = 5;
        this.bullets = [];
        this.health = 100;
    }

    draw() {
        ctx.beginPath();
        ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
        ctx.fillStyle = this.color;
        ctx.fill();
        ctx.closePath();
        
        // Health bar
        ctx.fillStyle = 'red';
        ctx.fillRect(this.x - 25, this.y - 30, 50, 5);
        ctx.fillStyle = 'green';
        ctx.fillRect(this.x - 25, this.y - 30, this.health / 2, 5);
    }

    shoot(targetX, targetY) {
        const angle = Math.atan2(targetY - this.y, targetX - this.x);
        this.bullets.push(new Bullet(this.x, this.y, angle));
    }
}

// Bullet class
class Bullet {
    constructor(x, y, angle) {
        this.x = x;
        this.y = y;
        this.speed = 10;
        this.angle = angle;
        this.radius = 5;
    }

    update() {
        this.x += Math.cos(this.angle) * this.speed;
        this.y += Math.sin(this.angle) * this.speed;
    }

    draw() {
        ctx.beginPath();
        ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
        ctx.fillStyle = 'black';
        ctx.fill();
        ctx.closePath();
    }
}

// Game setup
const player = new Player(canvas.width/2, canvas.height/2, 'blue');
const enemies = [
    new Player(100, 100, 'red'),
    new Player(canvas.width-100, canvas.height-100, 'red')
];

// Input handling
const keys = {};
window.addEventListener('keydown', e => keys[e.key] = true);
window.addEventListener('keyup', e => keys[e.key] = false);
canvas.addEventListener('click', e => {
    player.shoot(e.clientX, e.clientY);
});

// Game loop
function gameLoop() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    
    // Player movement
    if(keys['w'] || keys['ArrowUp']) player.y -= player.speed;
    if(keys['s'] || keys['ArrowDown']) player.y += player.speed;
    if(keys['a'] || keys['ArrowLeft']) player.x -= player.speed;
    if(keys['d'] || keys['ArrowRight']) player.x += player.speed;

    // Keep player in bounds
    player.x = Math.max(player.radius, Math.min(canvas.width - player.radius, player.x));
    player.y = Math.max(player.radius, Math.min(canvas.height - player.radius, player.y));

    // Update and draw bullets
    player.bullets.forEach((bullet, index) => {
        bullet.update();
        bullet.draw();

        // Remove bullets that are off screen
        if(bullet.x < 0 || bullet.x > canvas.width || bullet.y < 0 || bullet.y > canvas.height) {
            player.bullets.splice(index, 1);
        }

        // Check bullet collisions with enemies
        enemies.forEach((enemy, enemyIndex) => {
            const dx = bullet.x - enemy.x;
            const dy = bullet.y - enemy.y;
            const distance = Math.sqrt(dx * dx + dy * dy);
            
            if(distance < enemy.radius + bullet.radius) {
                enemy.health -= 10;
                player.bullets.splice(index, 1);
                
                if(enemy.health <= 0) {
                    enemies.splice(enemyIndex, 1);
                }
            }
        });
    });

    // Draw player and enemies
    player.draw();
    enemies.forEach(enemy => enemy.draw());

    // Simple enemy AI
    enemies.forEach(enemy => {
        const dx = player.x - enemy.x;
        const dy = player.y - enemy.y;
        const angle = Math.atan2(dy, dx);
        enemy.x += Math.cos(angle) * (enemy.speed * 0.5);
        enemy.y += Math.sin(angle) * (enemy.speed * 0.5);
        
        if(Math.random() < 0.02) {
            enemy.shoot(player.x, player.y);
        }
    });

    // Update and draw enemy bullets
    enemies.forEach(enemy => {
        enemy.bullets.forEach((bullet, index) => {
            bullet.update();
            bullet.draw();

            // Check collision with player
            const dx = bullet.x - player.x;
            const dy = bullet.y - player.y;
            const distance = Math.sqrt(dx * dx + dy * dy);
            
            if(distance < player.radius + bullet.radius) {
                player.health -= 5;
                enemy.bullets.splice(index, 1);
                
                if(player.health <= 0) {
                    alert('Game Over!');
                    window.location.reload();
                }
            }
        });
    });

    requestAnimationFrame(gameLoop);
}

gameLoop();
</script>
</body>
</html>
