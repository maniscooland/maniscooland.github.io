<!DOCTYPE html>
<html>
<head>
    <title>Off-Road Driving</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            overflow: hidden;
        }
        canvas {
            display: block;
            background: #90EE90;
        }
    </style>
</head>
<body>
    <canvas id="gameCanvas"></canvas>
    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');

        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        window.addEventListener('resize', () => {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        });

        // Create dirt road paths
        const roads = [
            {x: 100, y: 100, width: 800, height: 60},
            {x: 300, y: 100, width: 60, height: 500},
            {x: 300, y: 540, width: 500, height: 60},
            {x: 800, y: 200, width: 60, height: 400}
        ];

        class Vehicle {
            constructor(x, y) {
                this.x = x;
                this.y = y;
                this.width = 80;
                this.height = 40;
                this.wheelBase = 40;
                this.wheelAngle = 0;
                this.maxWheelAngle = Math.PI/4;
                this.rotation = 0;
                this.speed = 0;
                this.maxSpeed = 5;
                this.acceleration = 0.2;
                this.friction = 0.98;
            }

            draw() {
                ctx.save();
                ctx.translate(this.x, this.y);
                ctx.rotate(this.rotation);

                // Car body
                ctx.fillStyle = '#4444FF';
                ctx.fillRect(-this.width/2, -this.height/2, this.width, this.height);

                // Back wheels (fixed)
                ctx.fillStyle = '#000';
                ctx.fillRect(-this.width/2, -this.height/2 - 5, 10, 5);
                ctx.fillRect(-this.width/2, this.height/2, 10, 5);

                // Front wheels (turning)
                ctx.save();
                ctx.translate(this.width/2 - 10, -this.height/2 - 5);
                ctx.rotate(this.wheelAngle);
                ctx.fillRect(0, 0, 10, 5);
                ctx.restore();

                ctx.save();
                ctx.translate(this.width/2 - 10, this.height/2);
                ctx.rotate(this.wheelAngle);
                ctx.fillRect(0, 0, 10, 5);
                ctx.restore();

                ctx.restore();
            }

            update() {
                // Steering
                if (keys.a) this.wheelAngle = Math.max(-this.maxWheelAngle, this.wheelAngle - 0.1);
                if (keys.d) this.wheelAngle = Math.min(this.maxWheelAngle, this.wheelAngle + 0.1);
                if (!keys.a && !keys.d) this.wheelAngle *= 0.5;

                // Acceleration
                if (keys.w) this.speed = Math.min(this.maxSpeed, this.speed + this.acceleration);
                if (keys.s) this.speed = Math.max(-this.maxSpeed/2, this.speed - this.acceleration);
                
                // Apply friction
                this.speed *= this.friction;

                // Update position and rotation based on bicycle model
                if (Math.abs(this.speed) > 0.1) {
                    const turnRadius = this.wheelBase / Math.sin(this.wheelAngle);
                    this.rotation += this.speed / turnRadius;
                }

                this.x += Math.cos(this.rotation) * this.speed;
                this.y += Math.sin(this.rotation) * this.speed;

                // Keep in bounds
                this.x = Math.max(this.width/2, Math.min(canvas.width - this.width/2, this.x));
                this.y = Math.max(this.height/2, Math.min(canvas.height - this.height/2, this.y));
            }
        }

        function drawRoads() {
            roads.forEach(road => {
                ctx.fillStyle = '#8B4513';
                ctx.fillRect(road.x, road.y, road.width, road.height);
                
                // Add road texture
                ctx.fillStyle = '#73370D';
                for(let i = 0; i < road.width; i += 20) {
                    for(let j = 0; j < road.height; j += 20) {
                        if((i + j) % 40 === 0) {
                            ctx.fillRect(road.x + i, road.y + j, 10, 10);
                        }
                    }
                }
            });
        }

        const vehicle = new Vehicle(400, 300);
        const keys = {w: false, s: false, a: false, d: false};

        window.addEventListener('keydown', e => keys[e.key] = true);
        window.addEventListener('keyup', e => keys[e.key] = false);

        function gameLoop() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            drawRoads();
            vehicle.update();
            vehicle.draw();
            
            requestAnimationFrame(gameLoop);
        }

        gameLoop();
    </script>
</body>
</html>
