<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Battle Royale Game</title><style>body,html{margin:0;padding:0;overflow:hidden}canvas{display:block}#menu{position:absolute;left:10px;top:10px;background:rgba(0,0,0,.7);color:#fff;padding:10px}.weapon-slot{width:100px;height:100px;margin:5px;cursor:pointer;display:inline-block}#extraWeapons{display:flex;flex-direction:column}#skinSelect,#gloveSelect{margin-top:10px}</style></head><body><div id="menu"><h3>Choose Weapon</h3><div id="weaponSlots"></div><div id="extraWeapons"><h4>Extra Weapons</h4><div id="extraWeaponSlots"></div></div><select id="skinSelect"></select><select id="gloveSelect"></select><input id="username" placeholder="Enter username"><button id="startGame">Start Game</button></div><canvas id="gameCanvas"></canvas><script>const canvas=document.getElementById("gameCanvas"),ctx=canvas.getContext("2d");canvas.width=window.innerWidth,canvas.height=window.innerHeight;const map={width:4e3,height:3e3,roadWidth:200,buildings:[],doors:[]},player={x:400,y:300,width:80,height:80,speed:5,velX:0,velY:0,angle:0,inVehicle:null,inBuilding:null,gun:null,ammo:400,magazineSize:10,magazineAmmo:10,username:"Player",health:100,skin:"default",gloves:"default"},vehicles=[],bullets=[],camera={x:0,y:0},vehicleTypes=[{type:"car",width:80,height:50,speed:4,color:"#4286f4",capacity:2},{type:"truck",width:100,height:60,speed:3,color:"#41f468",capacity:2}],guns=[{name:"pistol",color:"#8B4513",length:20,image:"pistol.png",displayImage:"pistolD.png",bulletCount:1,damage:2,slot:"P"},{name:"shotgun",color:"#A0522D",length:30,image:"shotgun.png",displayImage:"shotgunD.png",bulletCount:4,damage:5,slot:"S"},{name:"rifle",color:"#D2691E",length:40,image:"rifle.png",displayImage:"rifleD.png",bulletCount:1,damage:3,slot:"R"},{name:"aShotgun",color:"#8B4513",length:35,image:"aShotgun.png",displayImage:"aShotgunD.png",bulletCount:4,damage:6,slot:"S"}],skins=["default","red","blue","green"],gloves=[{name:"default",images:["ga1.png","ga2.png"]},{name:"type_b",images:["gb1.png","gb2.png"]}],playerImage=new Image;playerImage.src="player.png";const gunImages={},gunDisplayImages={},gloveImages={};guns.forEach(e=>{gunImages[e.name]=new Image,gunImages[e.name].src=e.image,gunDisplayImages[e.name]=new Image,gunDisplayImages[e.name].src=e.displayImage}),gloves.forEach(e=>{gloveImages[e.name]=e.images.map(e=>{const t=new Image;return t.src=e,t})});const aiPlayers=[];for(let e=0;e<10;e++)aiPlayers.push({x:Math.random()*map.width,y:Math.random()*map.height,width:40,height:40,speed:2,angle:2*Math.random()*Math.PI,inVehicle:null,inBuilding:null,gun:guns[Math.floor(Math.random()*guns.length)],ammo:400,magazineSize:10,magazineAmmo:10,state:"wandering",target:null,targetTimer:0,username:"AI_"+e,health:100,skin:skins[Math.floor(Math.random()*skins.length)],gloves:gloves[Math.floor(Math.random()*gloves.length)].name});for(let e=0;e<20;e++){const t={x:Math.random()*map.width,y:Math.random()*map.height,width:200+200*Math.random(),height:200+200*Math.random(),interior:{color:"#D2B48C"}};let n=!1;for(const e of map.buildings)if(checkCollision(t,e)){n=!0;break}n||(map.buildings.push(t),map.doors.push({x:t.x+t.width/2,y:t.y+t.height,width:40,height:60,isOpen:!1,openAngle:0}))}for(let e=0;e<4;e++){const t=vehicleTypes[Math.floor(Math.random()*vehicleTypes.length)];vehicles.push({...t,x:Math.random()*map.width,y:Math.random()*map.height,angle:2*Math.random()*Math.PI,steeringAngle:0,maxSteeringAngle:Math.PI/4,driver:null,passenger:null})}let keys={w:!1,s:!1,a:!1,d:!1};function drawMap(){ctx.fillStyle="#7CFC00",ctx.fillRect(0,0,canvas.width,canvas.height),ctx.fillStyle="#8B4513",ctx.fillRect(map.width/2-map.roadWidth/2-camera.x,0,map.roadWidth,canvas.height),ctx.fillRect(0,map.height/2-map.roadWidth/2-camera.y,canvas.width,map.roadWidth),ctx.fillStyle="#808080",map.buildings.forEach(e=>{ctx.fillRect(e.x-camera.x,e.y-camera.y,e.width,e.height),player.inBuilding===e&&(ctx.fillStyle=e.interior.color,ctx.fillRect(e.x-camera.x,e.y-camera.y,e.width,e.height),ctx.fillStyle="#808080")}),ctx.fillStyle="#8B4513",map.doors.forEach(e=>{ctx.save(),ctx.translate(e.x-camera.x,e.y-camera.y),ctx.rotate(e.openAngle),ctx.fillRect(-e.width/2,0,e.width,e.height),ctx.restore()})}function drawVehicle(e){ctx.save(),ctx.translate(e.x-camera.x,e.y-camera.y),ctx.rotate(e.angle),ctx.fillStyle=e.color,ctx.fillRect(-e.width/2,-e.height/2,e.width,e.height),ctx.fillStyle="#000000",ctx.save(),ctx.translate(e.width/2-10,-e.height/2),ctx.rotate(e.steeringAngle),ctx.fillRect(-5,-5,10,10),ctx.restore(),ctx.save(),ctx.translate(e.width/2-10,e.height/2),ctx.rotate(e.steeringAngle),ctx.fillRect(-5,-5,10,10),ctx.restore(),ctx.fillRect(-e.width/2+5,-e.height/2-5,10,10),ctx.fillRect(-e.width/2+5,e.height/2-5,10,10),ctx.restore(),e.driver&&drawPlayer(e.driver,!0,e),e.passenger&&drawPlayer(e.passenger,!0,e)}function drawPlayer(e,t=!1,n=null){ctx.save(),t?ctx.translate(n.x-camera.x,n.y-camera.y):ctx.translate(e.x-camera.x,e.y-camera.y),ctx.rotate(e.angle),ctx.fillStyle=e.skin,ctx.fillRect(-e.width/2,-e.height/2,e.width,e.height),ctx.drawImage(playerImage,-e.width/2,-e.height/2,e.width,e.height),e.gun&&(ctx.drawImage(gunImages[e.gun.name],e.width/2,-e.height/4,40,20),ctx.drawImage(gloveImages[e.gloves][0],e.width/2-10,-e.height/4-10,20,20)),ctx.fillStyle="#000",ctx.font="12px Arial",ctx.fillText(e.username,-20,30),ctx.fillStyle="red",ctx.fillRect(-20,-25,40,5),ctx.fillStyle="green",ctx.fillRect(-20,-25,40*e.health/100,5),ctx.restore()}function drawBullets(){bullets.forEach(e=>{const t=new Image;t.src="bullet.png",ctx.drawImage(t,e.x-camera.x,e.y-camera.y,10,10)})}function drawHUD(){ctx.fillStyle="#000000",ctx.font="20px Arial",ctx.fillText(`Health: ${player.health}`,10,30),ctx.fillText(`Gun: ${player.gun?player.gun.name:"None"}`,10,60),ctx.fillText(`Ammo: ${player.magazineAmmo}/${player.ammo}`,10,90)}function updateBullets(){for(let e=bullets.length-1;e>=0;e--){bullets[e].x+=10*Math.cos(bullets[e].angle),bullets[e].y+=10*Math.sin(bullets[e].angle);let t=!1;[player,...aiPlayers].forEach(n=>{n!==bullets[e].shooter&&!n.inBuilding&&checkCollision(bullets[e],n)&&(n.health-=bullets[e].damage,n.health<=0&&(n===player?console.log("Game Over"):aiPlayers.splice(aiPlayers.indexOf(n),1)),t=!0)}),vehicles.forEach(n=>{checkCollision(bullets[e],n)&&(t=!0)}),map.buildings.forEach(n=>{checkCollision(bullets[e],n)&&(t=!0)}),(t||bullets[e].x<0||bullets[e].x>map.width||bullets[e].y<0||bullets[e].y>map.height)&&bullets.splice(e,1)}}function shoot(e){if(e.gun&&e.magazineAmmo>0){const t=e.gun.bulletCount;for(let n=0;n<t;n++){const a=e.angle+(t>1?.1*(n-(t-1)/2):0);bullets.push({x:e.x+30*Math.cos(a),y:e.y+30*Math.sin(a),angle:a,damage:e.gun.damage,shooter:e})}e.magazineAmmo--}}function reload(e){if(e.gun&&e.ammo>0){const t=e.magazineSize-e.magazineAmmo,n=Math.min(t,e.ammo);e.magazineAmmo+=n,e.ammo-=n}}function checkCollision(e,t){return e.x<t.x+t.width&&e.x+e.width>t.x&&e.y<t.y+t.height&&e.y+e.height>t.y}function updateAI(e){switch(e.state){case"wandering":if(e.x+=Math.cos(e.angle)*e.speed,e.y+=Math.sin(e.angle)*e.speed,Math.random()<.02&&(e.angle=2*Math.random()*Math.PI),!e.inVehicle&&!e.inBuilding){let t=null,n=1/0;if(vehicles.forEach(a=>{if(a.driver&&!a.passenger||!a.driver){let i=Math.hypot(a.x-e.x,a.y-e.y);i<n&&(t=a,n=i)}}),t&&n<100&&(e.state="seeking_vehicle",e.target=t),Math.random()<.02&&e.gun&&shoot(e),0===e.magazineAmmo&&e.ammo>0&&reload(e),e.inBuilding){const t=e.inBuilding;e.x=Math.max(t.x,Math.min(t.x+t.width-e.width,e.x)),e.y=Math.max(t.y,Math.min(t.y+t.height-e.height,e.y))}}break;case"seeking_vehicle":let t=e.target.x-e.x,n=e.target.y-e.y;if(e.angle=Math.atan2(n,t),e.x+=Math.cos(e.angle)*e.speed,e.y+=Math.sin(e.angle)*e.speed,Math.hypot(t,n)<10){let t=e.target;t.driver?t.passenger||(t.passenger=e):t.driver=e,e.inVehicle=t,e.state="wandering",e.target=null}e.targetTimer++>300&&(e.state="wandering",e.target=null)}}function updatePlayerMovement(){const e=.5,t=.95;keys.w&&(player.velY-=e),keys.s&&(player.velY+=e),keys.a&&(player.velX-=e),keys.d&&(player.velX+=e),player.velX*=t,player.velY*=t,player.x+=player.velX,player.y+=player.velY}function gameLoop(){player.inVehicle||updatePlayerMovement(),ctx.clearRect(0,0,canvas.width,canvas.height),camera.x=player.x-canvas.width/2,camera.y=player.y-canvas.height/2,drawMap(),vehicles.forEach(drawVehicle),aiPlayers.forEach(e=>drawPlayer(e)),player.inVehicle||drawPlayer(player),drawBullets(),drawHUD(),updateBullets(),aiPlayers.forEach(updateAI),requestAnimationFrame(gameLoop)}window.addEventListener("keydown",e=>{keys.hasOwnProperty(e.key)&&(keys[e.key]=!0)}),window.addEventListener("keyup",e=>{keys.hasOwnProperty(e.key)&&(keys[e.key]=!1)}),canvas.addEventListener("mousemove",e=>{const t=canvas.getBoundingClientRect(),n=e.clientX-t.left,a=e.clientY-t.top;player.angle=Math.atan2(a-canvas.height/2,n-canvas.width/2)});const weaponSlots=document.getElementById("weaponSlots"),extraWeaponSlots=document.getElementById("extraWeaponSlots"),skinSelect=document.getElementById("skinSelect"),gloveSelect=document.getElementById("gloveSelect");guns.forEach(e=>{const t=document.createElement("div");t.className="weapon-slot",t.style.backgroundImage=`url(${e.displayImage})`,t.onclick=()=>player.gun=e,weaponSlots.appendChild(t)}),skins.forEach(e=>{const t=document.createElement("option");t.value=e,t.textContent=e,skinSelect.appendChild(t)}),gloves.forEach(e=>{const t=document.createElement("option");t.value=e.name,t.textContent=e.name,gloveSelect.appendChild(t)}),document.getElementById("startGame").onclick=()=>{player.username=document.getElementById("username").value||"Player",player.skin=skinSelect.value,player.gloves=gloveSelect.value,document.getElementById("menu").style.display="none",gameLoop()},window.addEventListener("keydown",e=>{if(player.inVehicle)switch(e.key){case"ArrowUp":player.inVehicle.speed+=.1;break;case"ArrowDown":player.inVehicle.speed-=.1;break;case"ArrowLeft":player.inVehicle.steeringAngle=-player.inVehicle.maxSteeringAngle;break;case"ArrowRight":player.inVehicle.steeringAngle=player.inVehicle.maxSteeringAngle;break;case"e":player.inVehicle.driver=null,player.inVehicle=null}else switch(e.key){case"r":reload(player);break;case" ":shoot(player);break;case"e":vehicles.forEach(t=>{Math.hypot(t.x-player.x,t.y-player.y)<50&&!t.driver&&(t.driver=player,player.inVehicle=t)})}}),window.addEventListener("keyup",e=>{player.inVehicle&&("ArrowLeft"===e.key||"ArrowRight"===e.key)&&(player.inVehicle.steeringAngle=0)});</script></body></html>
